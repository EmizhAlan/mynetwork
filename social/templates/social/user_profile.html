{% extends "base.html" %}

{% block content %}
<div class="container profile-user mt-4">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ profile_user.username }}</h2>

    {% if profile_user.avatar %}
        <img src="{{ profile_user.avatar.url }}" class="profile-avatar mb-3" 
             style="width:120px; height:120px; border-radius:50%; object-fit:cover;">
    {% endif %}

    <p><strong>Email:</strong> {{ profile_user.email }}</p>
    <p><strong>–û —Å–µ–±–µ:</strong> {{ profile_user.bio|default:"(–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è)" }}</p>

    <hr>

    {% if profile_user != request.user %}
        {% if friendship_status == "none" %}
            <form action="{% url 'send_friend_request' profile_user.username %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary mt-2">
                    –î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è
                </button>
            </form>

        {% elif friendship_status == "pending" %}
            <p class="text-muted mt-2">‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)</p>

        {% elif friendship_status == "incoming" %}
            <form action="{% url 'accept_friend_request' friendship_id %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-success mt-2">
                    –ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É
                </button>
            </form>
            <form action="{% url 'reject_friend_request' friendship_id %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger mt-2">
                    –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                </button>
            </form>

        {% elif friendship_status == "friends" %}
            <p class="text-success mt-2">üë• –í—ã –¥—Ä—É–∑—å—è</p>
            <form action="{% url 'remove_friend' profile_user.username %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger mt-2">
                    –£–¥–∞–ª–∏—Ç—å –∏–∑ –¥—Ä—É–∑–µ–π
                </button>
            </form>
            <a href="{% url 'chat_view' username=profile_user.username %}" class="btn btn-success mt-2">
                üí¨ –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            </a>
        {% endif %}
    {% else %}
        <a href="{% url 'friends_list' %}" class="btn btn-info mt-2">
            üë• –ú–æ–∏ –¥—Ä—É–∑—å—è
        </a>
    {% endif %}
    

    <br>
    <a href="{% url 'index' %}" class="btn btn-secondary mt-3">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>
{% endblock %}
