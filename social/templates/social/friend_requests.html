{% extends "base.html" %}

{% block content %}
<h2>Заявки в друзья</h2>

<h4>Входящие заявки</h4>
{% if incoming_requests %}
  <ul>
    {% for f in incoming_requests %}
      <li>
        {{ f.from_user.username }}
        <form action="{% url 'accept_friend_request' f.id %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="btn btn-success btn-sm">Принять</button>
        </form>
        <form action="{% url 'reject_friend_request' f.id %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger btn-sm">Отклонить</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>Входящих заявок нет.</p>
{% endif %}

<hr>

<h4>Исходящие заявки</h4>
{% if outgoing_requests %}
  <ul>
    {% for f in outgoing_requests %}
      <li>
        {{ f.to_user.username }} (ожидает подтверждения)
        <form action="{% url 'cancel_friend_request' f.id %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="btn btn-warning btn-sm">Отозвать</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>Исходящих заявок нет.</p>
{% endif %}

<a href="{% url 'index' %}" class="btn btn-secondary mt-3">На главную</a>
{% endblock %}
